{"ast":null,"code":"import _asyncToGenerator from\"/home/phil/react-music-player/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/phil/react-music-player/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/phil/react-music-player/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPlay,faAngleLeft,faAngleRight,faPause}from\"@fortawesome/free-solid-svg-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Player=function Player(_ref){var songInfo=_ref.songInfo,setSongInfo=_ref.setSongInfo,currentSong=_ref.currentSong,isPlaying=_ref.isPlaying,setIsPlaying=_ref.setIsPlaying,audioRef=_ref.audioRef,songs=_ref.songs,setCurrentSong=_ref.setCurrentSong,setSongs=_ref.setSongs;var activeLibraryHandler=function activeLibraryHandler(nextPrev){var newSongs=songs.map(function(song){if(song.id===nextPrev.id){return _objectSpread(_objectSpread({},song),{},{active:true});}else{return _objectSpread(_objectSpread({},song),{},{active:false});}});setSongs(newSongs);};// Event Handlers\nvar playSongHandler=function playSongHandler(){if(isPlaying){audioRef.current.pause();setIsPlaying(!isPlaying);}else{audioRef.current.play();setIsPlaying(!isPlaying);}};var getTime=function getTime(time){return Math.floor(time/60)+\":\"+(\"0\"+Math.floor(time%60)).slice(-2);};var dragHandler=function dragHandler(e){audioRef.current.currentTime=e.target.value;setSongInfo(_objectSpread(_objectSpread({},songInfo),{},{currentTime:e.target.value}));};var skipTrackHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(direction){var currentIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currentIndex=songs.findIndex(function(song){return song.id===currentSong.id;});if(!(direction===\"skip-forward\")){_context.next=5;break;}_context.next=4;return setCurrentSong(songs[(currentIndex+1)%songs.length]);case 4:activeLibraryHandler(songs[(currentIndex+1)%songs.length]);case 5:if(!(direction===\"skip-back\")){_context.next=15;break;}if(!((currentIndex-1)%songs.lenght===-1)){_context.next=12;break;}_context.next=9;return setCurrentSong(songs[songs.lenght-1]);case 9:activeLibraryHandler(songs[songs.lenght-1]);if(isPlaying)audioRef.current.play();return _context.abrupt(\"return\");case 12:_context.next=14;return setCurrentSong(songs[(currentIndex-1)%songs.length]);case 14:activeLibraryHandler(songs[(currentIndex-1)%songs.length]);case 15:if(isPlaying)audioRef.current.play();case 16:case\"end\":return _context.stop();}}},_callee);}));return function skipTrackHandler(_x){return _ref2.apply(this,arguments);};}();// Add the styles\nvar trackAnim={transform:\"translateX(\".concat(songInfo.animationPercentage,\"%)\")};return/*#__PURE__*/_jsxs(\"div\",{className:\"player\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"time-control\",children:[/*#__PURE__*/_jsx(\"p\",{children:getTime(songInfo.currentTime)}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"linear-gradient(to right,\".concat(currentSong.color[0],\",\").concat(currentSong.color[1],\")\")},className:\"track\",children:[/*#__PURE__*/_jsx(\"input\",{min:0,max:songInfo.duration||0,value:songInfo.currentTime,onChange:dragHandler,type:\"range\"}),/*#__PURE__*/_jsx(\"div\",{style:trackAnim,className:\"animate-track\"})]}),/*#__PURE__*/_jsx(\"p\",{children:songInfo.duration?getTime(songInfo.duration):\"0:00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"play-control\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:function onClick(){return skipTrackHandler(\"skip-back\");},className:\"skip-back\",size:\"2x\",icon:faAngleLeft}),/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:playSongHandler,className:\"play\",size:\"2x\",icon:isPlaying?faPause:faPlay}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"skip-forward\",size:\"2x\",icon:faAngleRight,onClick:function onClick(){return skipTrackHandler(\"skip-forward\");}})]})]});};export default Player;","map":{"version":3,"sources":["/home/phil/react-music-player/src/components/Player.js"],"names":["React","FontAwesomeIcon","faPlay","faAngleLeft","faAngleRight","faPause","Player","songInfo","setSongInfo","currentSong","isPlaying","setIsPlaying","audioRef","songs","setCurrentSong","setSongs","activeLibraryHandler","nextPrev","newSongs","map","song","id","active","playSongHandler","current","pause","play","getTime","time","Math","floor","slice","dragHandler","e","currentTime","target","value","skipTrackHandler","direction","currentIndex","findIndex","length","lenght","trackAnim","transform","animationPercentage","background","color","duration"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faPlay,\n  faAngleLeft,\n  faAngleRight,\n  faPause,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst Player = ({\n  songInfo,\n  setSongInfo,\n  currentSong,\n  isPlaying,\n  setIsPlaying,\n  audioRef,\n  songs,\n  setCurrentSong,\n  setSongs,\n}) => {\n\n  const activeLibraryHandler = (nextPrev) => {\n    const newSongs = songs.map((song) => {\n      if (song.id === nextPrev.id) {\n        return {\n          ...song,\n          active: true,\n        };\n      } else {\n        return {\n          ...song,\n          active: false,\n        };\n      }\n    });\n    setSongs(newSongs);\n  }\n  // Event Handlers\n  const playSongHandler = () => {\n    if (isPlaying) {\n      audioRef.current.pause();\n      setIsPlaying(!isPlaying);\n    } else {\n      audioRef.current.play();\n      setIsPlaying(!isPlaying);\n    }\n  };\n\n  const getTime = (time) => {\n    return (\n      Math.floor(time / 60) + \":\" + (\"0\" + Math.floor(time % 60)).slice(-2)\n    );\n  };\n  const dragHandler = (e) => {\n    audioRef.current.currentTime = e.target.value;\n    setSongInfo({ ...songInfo, currentTime: e.target.value });\n  };\n\n  const skipTrackHandler = async (direction) => {\n    let currentIndex = songs.findIndex((song) => song.id === currentSong.id);\n\n    if (direction === \"skip-forward\") {\n      await setCurrentSong(songs[(currentIndex + 1) % songs.length]);\n      activeLibraryHandler(songs[(currentIndex + 1) % songs.length])\n    }\n    if (direction === \"skip-back\") {\n      if ((currentIndex - 1) % songs.lenght === -1) {\n        await setCurrentSong(songs[songs.lenght - 1]);\n        activeLibraryHandler(songs[songs.lenght - 1]);\n\n        if (isPlaying) audioRef.current.play();\n        return;\n      } \n      await setCurrentSong(songs[(currentIndex - 1) % songs.length]);\n      activeLibraryHandler(songs[(currentIndex - 1) % songs.length]);\n    }\n    if (isPlaying) audioRef.current.play();\n  };\n  // Add the styles\n  const trackAnim = {\n    transform: `translateX(${songInfo.animationPercentage}%)`,\n  };\n\n  return (\n    <div className=\"player\">\n      <div className=\"time-control\">\n        <p>{getTime(songInfo.currentTime)}</p>\n        <div\n          style={{\n            background: `linear-gradient(to right,${currentSong.color[0]},${currentSong.color[1]})`,\n          }}\n          className=\"track\"\n        >\n          <input\n            min={0}\n            max={songInfo.duration || 0}\n            value={songInfo.currentTime}\n            onChange={dragHandler}\n            type=\"range\"\n          />\n          <div style={trackAnim} className=\"animate-track\"></div>\n        </div>\n        <p>{songInfo.duration ? getTime(songInfo.duration) : \"0:00\"}</p>\n      </div>\n      <div className=\"play-control\">\n        <FontAwesomeIcon\n          onClick={() => skipTrackHandler(\"skip-back\")}\n          className=\"skip-back\"\n          size=\"2x\"\n          icon={faAngleLeft}\n        />\n        <FontAwesomeIcon\n          onClick={playSongHandler}\n          className=\"play\"\n          size=\"2x\"\n          icon={isPlaying ? faPause : faPlay}\n        />\n        <FontAwesomeIcon\n          className=\"skip-forward\"\n          size=\"2x\"\n          icon={faAngleRight}\n          onClick={() => skipTrackHandler(\"skip-forward\")}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Player;\n"]},"metadata":{},"sourceType":"module"}